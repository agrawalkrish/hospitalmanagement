<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patients</title>
    <link rel="stylesheet" href="style.css" />

    <!-- CSS Global Compulsory -->
    <link
      rel="stylesheet"
      href="assets/plugins/bootstrap/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- CSS Header and Footer -->
    <link rel="stylesheet" href="assets/css/header.css" />
    <link rel="stylesheet" href="assets/css/footer.css" />

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="assets/plugins/line-icons-pro/styles.css" />
    <link rel="stylesheet" href="assets/plugins/line-icons/line-icons.css" />
    <link
      rel="stylesheet"
      href="assets/plugins/font-awesome/css/font-awesome.min.css"
    />
  </head>
  <body>
    <!--=== Header v1 ===-->
    <div class="header-v1">
        <!-- Topbar -->
        <div class="topbar-v1">
          <div class="container">
            <div class="row">
              <div class="col-md-6">
                <ul class="list-inline top-v1-contacts">
                  <li>
                    <i class="fa fa-envelope"></i> Email:
                    unityhospital@gmail.com
                  </li>
                  <li><i class="fa fa-phone"></i> Contact no : 88666 00555</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- End Topbar -->

        <!-- Navbar -->
        <div class="navbar mega-menu" role="navigation">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="res-container">
              <button
                type="button"
                class="navbar-toggle"
                data-toggle="collapse"
                data-target=".navbar-responsive-collapse"
              >
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <div class="navbar-brand">
                <a href="index.html">
                  <img src="assets/img/logo/unity_white.jpg" alt="Logo" />
                </a>
              </div>
            </div>
            <!--/end responsive container-->

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-responsive-collapse">
              <div class="res-container">
                <ul class="nav navbar-nav">
                  <!-- Collect the nav links, forms, and other content for toggling -->

                  <!-- Home  -->
                  <li class="mega-menu-fullwidth">
                    <a href="index.htm"> HOME </a>
                  </li>
                  <!-- End Home-->

                  <!-- About Us -->
                  <li class="mega-menu-fullwidth">
                    <a href="about.html"> ABOUT US </a>
                  </li>
                  <!-- End About us -->

                  <!-- Doctors -->
                  <li class="mega-menu-fullwidth">
                    <a href="doctors.htm"> DOCTORS </a>
                  </li>
                  <!-- End Doctors -->

                  <!-- Other Staffs -->
                  <li class="mega-menu-fullwidth">
                    <a href="staff.htm"> STAFF </a>
                  </li>
                  <!-- End Other Staffs -->

                  <!-- Gallery -->
                  <li class="mega-menu-fullwidth">
                    <a href="gallery.html"> GALLERY </a>
                  </li>
                  <!-- End Gallery -->

                  <!-- Patients -->
                  <li class="mega-menu-fullwidth">
                    <a href="patients.htm">PATIENTS</a>
                  </li>
                  <!-- End Patients -->

                  <!-- In Patients-->
                  <li class="mega-menu-fullwidth">
                    <a href="inpatientsrecord.htm"> IN</a>
                  </li>
                  <!-- End In Patients-->

                  <!-- Out Patients-->
                  <li class="mega-menu-fullwidth">
                    <a href="outpatients.htm"> OUT</a>
                  </li>
                  <!-- End Out Patients-->

                  <!--Priscribtion-->
                  <li class="mega-menu-fullwidth">
                    <a href="priscribtion.htm"> PRISCRIBTION</a>
                  </li>
                  <!-- End Priscribtion-->

                  <!-- Out labtests-->
                  <li class="mega-menu-fullwidth">
                    <a href="labtests.htm"> LABTESTS</a>
                  </li>
                  <!-- End Out labtests-->

                  <!-- Appointment -->
                  <li class="mega-menu-fullwidth">
                    <a href="appointments.htm"> BOOK APPOINTMENT </a>
                  </li>
                  <!-- End Appointment -->
                   <!-- Billing -->
                  <li class="mega-menu-fullwidth">
                    <a href="billing.htm">BILLING </a>
                  </li>
                  <!-- End BILLING -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Navbar -->
      <div class="card">
        <h2>Manage Patients</h2>
        <div class="contain">
          <div class="input-section">
            <!-- Add Patient Form -->
            <form id="addPatientForm" onsubmit="addPatient(event)">
              <label for="first_name">First Name:</label>
              <input type="text" id="first_name" name="first_name" required />
  
              <label for="last_name">Last Name:</label>
              <input type="text" id="last_name" name="last_name" required />
  
              <label for="date_of_birth">Date of Birth:</label>
              <input type="date" id="date_of_birth" name="date_of_birth" />
  
              <label for="gender">Gender:</label>
              <input type="text" id="gender" name="gender" />
  
              <label for="address">Address:</label>
              <input type="text" id="address" name="address" />
  
              <label for="contact_number">Contact Number:</label>
              <input type="text" id="contact_number" name="contact_number" />
  
              <label for="insurance_information">Insurance Information:</label>
              <input type="text" id="insurance_information" name="insurance_information" />
  
              <label for="medical_history">Medical History:</label>
              <textarea id="medical_history" name="medical_history"></textarea>
  
              <button type="submit">Add Patient</button>
            </form>
          </div>
          <div class="output-section">
            <h3>Patient List</h3>
            <table id="patientTable">
              <tr>
                <th>Patient ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>DOB</th>
                <th>Gender</th>
                <th>Address</th>
                <th>Contact</th>
                <th>Insurance Info</th>
                <th>Medical History</th>
              </tr>
            </table>
          </div>
        </div>
      </div>

    <!--=== Footer ===-->
    <div class="footer-v1">
        <div class="footer">
          <div class="container">
            <div class="row">
              <!-- About -->
              <div class="col-md-3" style="margin-bottom: 40px">
                <a href="index.html"
                  ><img
                    id="logo-footer"
                    class="footer-logo"
                    src="assets/img/logo/unity_white.jpg"
                    alt=""
                /></a>
                <p>
                  At Unity Hospital, we are convinced that 'quality' and 'lowest
                  cost' are not mutually exclusive when it comes to healthcare
                  delivery.
                </p>
                <p>
                  Our mission is to deliver high quality, affordable healthcare
                  services to the broader population in India.
                </p>
              </div>
              <!--/col-md-3-->
              <!-- End About -->

              <!-- Latest -->
              <div class="col-md-3" style="margin-bottom: 40px">
                <div class="posts">
                  <div class="headline"><h2>Latest Posts</h2></div>
                  <ul class="list-unstyled latest-list">
                    <li>
                      <a href="blog.html">Incredible content</a>
                      <small>December 16, 2020</small>
                    </li>
                    <li>
                      <a href="gallery.html">Latest Images</a>
                      <small>December 16, 2020</small>
                    </li>
                    <li>
                      <a href="terms.html">Terms and Conditions</a>
                      <small>December 16, 2020</small>
                    </li>
                  </ul>
                </div>
              </div>
              <!--/col-md-3-->
              <!-- End Latest -->

              <!-- Link List -->
              <div class="col-md-3" style="margin-bottom: 40px">
                <div class="headline"><h2>Useful Links</h2></div>
                <ul class="list-unstyled link-list">
                  <li>
                    <a href="about.html">About us</a
                    ><i class="fa fa-angle-right"></i>
                  </li>
                  <li>
                    <a href="Contact.html">Contact us</a
                    ><i class="fa fa-angle-right"></i>
                  </li>
                  <li>
                    <a href="appointment.html">Book Appointment</a
                    ><i class="fa fa-angle-right"></i>
                  </li>
                </ul>
              </div>
              <!--/col-md-3-->
              <!-- End Link List -->

              <!-- Address -->
              <div class="col-md-3 map-img" style="margin-bottom: 40px">
                <div class="headline"><h2>Contact Us</h2></div>
                <address class="" style="margin-bottom: 40px">
                  Unity Hospital <br />
                  Ahmedabad, IN <br />
                  Phone: 886 666 00555 <br />
                  Email: unityhospital@gmail.com
                </address>
              </div>
              <!--/col-md-3-->
              <!-- End Address -->
            </div>
          </div>
        </div>
        <!--/footer-->

        <div class="copyright">
          <div class="container">
            <div class="row">
              <div class="col-md-6">
                <p>
                  2020 &copy; All Rights Reserved.
                  <a href="privacy.html">Privacy Policy</a> |
                  <a href="terms.html">Terms of Service</a>
                </p>
              </div>

              <!-- Social Links -->
              <div class="col-md-6">
                <ul class="footer-socials list-inline">
                  <li>
                    <a
                      href="http://www.facebook.com"
                      class="tooltips"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=""
                      data-original-title="Facebook"
                    >
                      <i class="fa fa-facebook"></i>
                    </a>
                  </li>
                  <li>
                    <a
                      href="http://www.skype.com"
                      class="tooltips"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=""
                      data-original-title="Skype"
                    >
                      <i class="fa fa-skype"></i>
                    </a>
                  </li>
                  <li>
                    <a
                      href="http://www.googleplus.com"
                      class="tooltips"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=""
                      data-original-title="Google Plus"
                    >
                      <i class="fa fa-google-plus"></i>
                    </a>
                  </li>
                  <li>
                    <a
                      href="http://www.linkedin.com"
                      class="tooltips"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=""
                      data-original-title="Linkedin"
                    >
                      <i class="fa fa-linkedin"></i>
                    </a>
                  </li>
                  <li>
                    <a
                      href="http://www.Pinterest.com"
                      class="tooltips"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=""
                      data-original-title="Pinterest"
                    >
                      <i class="fa fa-pinterest"></i>
                    </a>
                  </li>
                  <li>
                    <a
                      href="http://www.twitter.com"
                      class="tooltips"
                      data-toggle="tooltip"
                      data-placement="top"
                      title=""
                      data-original-title="Twitter"
                    >
                      <i class="fa fa-twitter"></i>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- End Social Links -->
            </div>
          </div>
        </div>
        <!--/copyright-->
      </div>
      <!--=== End Footer ===-->
      <script>
        // Fetch and display all patients when loading the page
        document.addEventListener("DOMContentLoaded", () => {
          fetch("http://localhost:3000/patient-details")
            .then((response) => response.json())
            .then((data) => {
              const table = document.getElementById("patientTable");
              data.forEach((patient) => {
                const newRow = table.insertRow();
                newRow.innerHTML = `
                  <td>${patient.patient_id}</td>
                  <td>${patient.first_name}</td>
                  <td>${patient.last_name}</td>
                  <td>${patient.date_of_birth}</td>
                  <td>${patient.gender}</td>
                  <td>${patient.address}</td>
                  <td>${patient.contact_number}</td>
                  <td>${patient.insurance_information}</td>
                  <td>${patient.medical_history}</td>
                  <td><button onclick="deletePatient(${patient.patient_id})">Delete</button></td>
                `;
              });
            })
            .catch((error) => console.error("Error fetching patients:", error));
        });
  
        // Function to handle form submission and add a patient
        function addPatient(event) {
          event.preventDefault();
  
          const patientData = {
            first_name: document.getElementById("first_name").value,
            last_name: document.getElementById("last_name").value,
            date_of_birth: document.getElementById("date_of_birth").value,
            gender: document.getElementById("gender").value,
            address: document.getElementById("address").value,
            contact_number: document.getElementById("contact_number").value,
            insurance_information: document.getElementById("insurance_information").value,
            medical_history: document.getElementById("medical_history").value
          };
  
          fetch("http://localhost:3000/add-patient", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(patientData),
          })
            .then((response) => response.json())
            .then((data) => {
              console.log(data.message);
              location.reload(); // Reload to show updated list
            })
            .catch((error) => console.error("Error adding patient:", error));
        }
  
        // Function to delete a patient (implement on backend as needed)
        function deletePatient(patientId) {
          if (confirm("Are you sure you want to delete this patient?")) {
            fetch(`http://localhost:3000/delete-patient/${patientId}`, {
              method: "DELETE",
            })
              .then((response) => {
                if (!response.ok) throw new Error("Failed to delete patient");
                location.reload();
              })
              .catch((error) => console.error("Error deleting patient:", error));
          }
        }
      </script>
  </body>
</html>
